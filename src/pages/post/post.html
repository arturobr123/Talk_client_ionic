<!--
  Generated template for the PostPage page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="Rose" >
    <ion-title>Post</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>

<div>

  <ion-item class="item-no-border">
    <ion-avatar item-left (click)="viewUser(post.user_id)">
      <img src="{{ post.user_avatar }}">
    </ion-avatar>
    <h3 color="indianRed" class="lighter inline" (click)="viewUser(post.user_id)">{{ post.username }}</h3>
    
    <p color="text" class="inline floatRight dateText textPost">{{ post.date }}</p>
    
  </ion-item>

  <div>
    <p color="text" class="textPost">{{ post.body}}</p>
    <img class="full-image" *ngIf="post.photo_url !='/photos/original/missing.png'" src="{{ post.photo_url}}" imageViewer >
    

    <p>
      <a (click)="toggleLike(post)" class="subdued">
        <ion-icon name="heart" color="primary"  *ngIf="post.liked"></ion-icon>
        <ion-icon name="heart" color="gray"  *ngIf="!post.liked"></ion-icon>
        {{ post.likes}}
      </a>
      <a class="subdued">
        <ion-icon name="chatboxes" color="gray" ></ion-icon>
        {{ post.commentsCount}}
      </a>

      <a class="subdued">
        <ion-icon name="share-alt" color="gray" ></ion-icon>
        {{ post.shares}}
      </a>

    </p>

    <ion-item class="post-comment" *ngFor="let comment of post.comments">
      <ion-avatar item-left (click)="viewUser(comment.user_id)">
        <img src="{{ comment.user_avatar }}">
      </ion-avatar>

      <h3 color="primary"  class="post-author lighter">
        {{ comment.commenter }}
      </h3>
      <p text-wrap  class="textPost">{{ comment.body}}</p>
      <a class="subdued like-count">
        <ion-icon name="heart" color="danger"  *ngIf="comment.liked"></ion-icon>
        <ion-icon name="heart" color="gray"  *ngIf="!comment.liked"></ion-icon>
        {{ comment.likeCount}}
      </a>
      <span class="post-time">
        <ion-icon name="timer-outline"></ion-icon>
        {{ comment.time }}
      </span>
    </ion-item>
  </div>

  </div>
</ion-content>






<ion-footer>
  <div class="bottom_bar">
    <ion-fab middle left>
      <button ion-fab mini tappable><ion-icon name="md-camera"></ion-icon></button>
    </ion-fab>
    <ion-input type="text" placeholder="Type your message"[(ngModel)]="newComment" ></ion-input>
    <ion-fab middle right>
      <button ion-fab mini tappable (click)="sendComment()" ><ion-icon name="md-send"></ion-icon></button>
    </ion-fab>
  </div>
</ion-footer>
