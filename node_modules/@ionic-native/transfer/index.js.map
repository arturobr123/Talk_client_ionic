{"version":3,"sources":["../../../src/@ionic-native/plugins/transfer/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAAA,OAAO,EAAE,UAAA,EAAW,MAAO,eAAA,CAAgB;AAC3C,OAAO,EAAE,eAAA,EAAiB,MAAA,EAAQ,aAAA,EAAe,iBAAA,EAAmB,iBAAA,EAAkB,MAAO,oBAAA,CAAqB;AA6GlH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA+DG;AASH,IAAa,QAAQ;IAAS,4BAAiB;IAR/C;QAAA,qEA0CC;QAhCC;;;;;;;;;WASG;QACH,2BAAqB,GAAG;YACtB,kBAAkB,EAAE,CAAC;YACrB,eAAe,EAAE,CAAC;YAClB,cAAc,EAAE,CAAC;YACjB,SAAS,EAAE,CAAC;YACZ,gBAAgB,EAAE,CAAC;SACpB,CAAC;;IAgBJ,CAAC;IAdC;;;OAGG;IACH,yBAAM,GAAN;QACE,MAAM,CAAC,IAAI,cAAc,EAAE,CAAC;IAC9B,CAAC;IAQH,eAAC;AAAD,CAlCA,AAkCC,CAlC6B,iBAAiB,GAkC9C;AANM,mBAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;CACnB,CAAC;AACF,kBAAkB;AACX,uBAAc,GAAmE,cAAM,OAAA,EAC7F,EAD6F,CAC7F,CAAC;AAjCW,QAAQ;IARpB,MAAM,CAAC;QACN,UAAU,EAAE,cAAc;QAC1B,MAAM,EAAE,8BAA8B;QACtC,SAAS,EAAE,cAAc;QACzB,IAAI,EAAE,wDAAwD;QAC9D,SAAS,EAAE,CAAC,gBAAgB,EAAE,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,eAAe,CAAC;KACjG,CAAC;GAEW,QAAQ,CAkCpB;SAlCY,QAAQ;AAoCrB;;GAEG;AAKH,IAAa,cAAc;IAGzB;QACE,EAAE,CAAC,CAAC,iBAAiB,CAAC,cAAc,EAAE,IAAI,EAAE,cAAc,CAAC,KAAK,IAAI,CAAC,CAAC,CAAC;YACrE,IAAI,CAAC,eAAe,GAAG,IAAI,YAAY,EAAE,CAAC;QAC5C,CAAC;IACH,CAAC;IAED;;;;;;;;OAQG;IAKH,+BAAM,GAAN,UAAO,OAAe,EAAE,GAAW,EAAE,OAA2B,EAAE,aAAuB;QACvF,MAAM,CAAC;IACT,CAAC;IAED;;;;;;;;OAQG;IAKH,iCAAQ,GAAR,UAAS,MAAc,EAAE,MAAc,EAAE,aAAuB,EAAE,OAA+B;QAC/F,MAAM,CAAC;IACT,CAAC;IAED;;;OAGG;IAEH,mCAAU,GAAV,UAAW,QAAuC;QAChD,IAAI,CAAC,eAAe,CAAC,UAAU,GAAG,QAAQ,CAAC;IAC7C,CAAC;IAED;;;OAGG;IAIH,8BAAK,GAAL,cAAgB,CAAC;IACnB,qBAAC;AAAD,CA5DA,AA4DC,IAAA;AAtCC;IAJC,eAAe,CAAC;QACf,YAAY,EAAE,CAAC;QACf,UAAU,EAAE,CAAC;KACd,CAAC;;;;4CAGD;AAeD;IAJC,eAAe,CAAC;QACf,YAAY,EAAE,CAAC;QACf,UAAU,EAAE,CAAC;KACd,CAAC;;;;8CAGD;AAOD;IADC,aAAa,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;;;;gDAG7B;AASD;IAHC,eAAe,CAAC;QACf,IAAI,EAAE,IAAI;KACX,CAAC;;;;2CACe;AA3DN,cAAc;IAJ1B,MAAM,CAAC;QACN,MAAM,EAAE,8BAA8B;QACtC,UAAU,EAAE,cAAc;KAC3B,CAAC;;GACW,cAAc,CA4D1B;SA5DY,cAAc","file":"index.js","sourceRoot":"","sourcesContent":["import { Injectable } from '@angular/core';\nimport { CordovaInstance, Plugin, InstanceCheck, checkAvailability, IonicNativePlugin } from '@ionic-native/core';\n\ndeclare const FileTransfer: any;\n\nexport interface FileUploadOptions {\n\n  /**\n   * The name of the form element.\n   * Defaults to 'file'.\n   */\n  fileKey?: string;\n\n  /**\n   * The file name to use when saving the file on the server.\n   * Defaults to 'image.jpg'.\n   */\n  fileName?: string;\n\n  /**\n   * The HTTP method to use - either PUT or POST.\n   * Defaults to POST.\n   */\n  httpMethod?: string;\n\n  /**\n   * The mime type of the data to upload.\n   * Defaults to image/jpeg.\n   */\n  mimeType?: string;\n\n  /**\n   * A set of optional key/value pairs to pass in the HTTP request.\n   */\n  params?: { [s: string]: any; };\n\n  /**\n   * Whether to upload the data in chunked streaming mode.\n   * Defaults to true.\n   */\n  chunkedMode?: boolean;\n\n  /**\n   * A map of header name/header values. Use an array to specify more\n   * than one value. On iOS, FireOS, and Android, if a header named\n   * Content-Type is present, multipart form data will NOT be used.\n   */\n  headers?: { [s: string]: any; };\n\n}\n\nexport interface FileUploadResult {\n\n  /**\n   * The number of bytes sent to the server as part of the upload.\n   */\n  bytesSent: number;\n\n  /**\n   * The HTTP response code returned by the server.\n   */\n  responseCode: number;\n\n  /**\n   * The HTTP response returned by the server.\n   */\n  response: string;\n\n  /**\n   * The HTTP response headers by the server.\n   */\n  headers: { [s: string]: any; };\n\n}\n\nexport interface FileTransferError {\n\n  /**\n   * One of the predefined error codes listed below.\n   */\n  code: number;\n\n  /**\n   * URL to the source.\n   */\n  source: string;\n\n  /**\n   * URL to the target.\n   */\n  target: string;\n\n  /**\n   * HTTP status code. This attribute is only available when a response\n   * code is received from the HTTP connection.\n   */\n  http_status: number;\n\n  /**\n   * Response body. This attribute is only available when a response is received from the HTTP connection.\n   */\n  body: string;\n\n  /**\n   * Either e.getMessage or e.toString.\n   */\n  exception: string;\n\n}\n\n/**\n * @name Transfer\n *\n * @description\n * This plugin allows you to upload and download files.\n *\n * @usage\n * ```typescript\n * import { Transfer, FileUploadOptions, TransferObject } from '@ionic-native/transfer';\n * import { File } from '@ionic-native/file';\n *\n * constructor(private transfer: Transfer, private file: File) { }\n *\n * ...\n *\n * const fileTransfer: TransferObject = this.transfer.create();\n *\n * // Upload a file:\n * fileTransfer.upload(..).then(..).catch(..);\n *\n * // Download a file:\n * fileTransfer.download(..).then(..).catch(..);\n *\n * // Abort active transfer:\n * fileTransfer.abort();\n *\n * // full example\n * upload() {\n *   let options: FileUploadOptions = {\n *      fileKey: 'file',\n *      fileName: 'name.jpg',\n *      headers: {}\n *      .....\n *   }\n *\n *   fileTransfer.upload('<file path>', '<api endpoint>', options)\n *    .then((data) => {\n *      // success\n *    }, (err) => {\n *      // error\n *    })\n * }\n **\n * download() {\n *   const url = 'http://www.example.com/file.pdf';\n *   fileTransfer.download(url, this.file.dataDirectory + 'file.pdf').then((entry) => {\n *     console.log('download complete: ' + entry.toURL());\n *   }, (error) => {\n *     // handle error\n *   });\n * }\n *\n * ```\n *\n * To store files in a different/publicly accessible directory, please refer to the following link\n * https://github.com/apache/cordova-plugin-file#where-to-store-files\n *\n * @interfaces\n * FileUploadOptions\n * FileUploadResult\n * FileTransferError\n * @classes\n * TransferObject\n */\n@Plugin({\n  pluginName: 'FileTransfer',\n  plugin: 'cordova-plugin-file-transfer',\n  pluginRef: 'FileTransfer',\n  repo: 'https://github.com/apache/cordova-plugin-file-transfer',\n  platforms: ['Amazon Fire OS', 'Android', 'Browser', 'iOS', 'Ubuntu', 'Windows', 'Windows Phone']\n})\n\nexport class Transfer extends IonicNativePlugin {\n\n  /**\n   * Error code rejected from upload with FileTransferError\n   * Defined in FileTransferError.\n   *      FILE_NOT_FOUND_ERR: 1   Return when file was not found\n   *      INVALID_URL_ERR: 2,     Return when url was invalid\n   *      CONNECTION_ERR: 3,      Return on connection error\n   *      ABORT_ERR: 4,           Return on aborting\n   *      NOT_MODIFIED_ERR: 5     Return on '304 Not Modified' HTTP response\n   * @enum {number}\n   */\n  FileTransferErrorCode = {\n    FILE_NOT_FOUND_ERR: 1,\n    INVALID_URL_ERR: 2,\n    CONNECTION_ERR: 3,\n    ABORT_ERR: 4,\n    NOT_MODIFIED_ERR: 5\n  };\n\n  /**\n   * Creates a new FileTransfer object\n   * @return {TransferObject}\n   */\n  create(): TransferObject {\n    return new TransferObject();\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\n/**\n * @hidden\n */\n@Plugin({\n  plugin: 'cordova-plugin-file-transfer',\n  pluginName: 'FileTransfer'\n})\nexport class TransferObject {\n  private _objectInstance: any;\n\n  constructor() {\n    if (checkAvailability('FileTransfer', null, 'FileTransfer') === true) {\n      this._objectInstance = new FileTransfer();\n    }\n  }\n\n  /**\n   * Sends a file to a server.\n   *\n   * @param {string} fileUrl  Filesystem URL representing the file on the device or a data URI. For backwards compatibility, this can also be the full path of the file on the device.\n   * @param {string} url  URL of the server to receive the file, as encoded by encodeURI().\n   * @param {FileUploadOptions} options  Optional parameters.\n   * @param {boolean} trustAllHosts  Optional parameter, defaults to false. If set to true, it accepts all security certificates. This is useful since Android rejects self-signed security certificates. Not recommended for production use. Supported on Android and iOS.\n   * @returns {Promise<FileUploadResult>} Returns a Promise that resolves to a FileUploadResult and rejects with FileTransferError.\n   */\n  @CordovaInstance({\n    successIndex: 2,\n    errorIndex: 3\n  })\n  upload(fileUrl: string, url: string, options?: FileUploadOptions, trustAllHosts?: boolean): Promise<FileUploadResult> {\n    return;\n  }\n\n  /**\n   * Downloads a file from server.\n   *\n   * @param {string} source  URL of the server to download the file, as encoded by encodeURI().\n   * @param {stirng} target  Filesystem url representing the file on the device. For backwards compatibility, this can also be the full path of the file on the device.\n   * @param {boolean} trustAllHosts  Optional parameter, defaults to false. If set to true, it accepts all security certificates. This is useful because Android rejects self-signed security certificates. Not recommended for production use. Supported on Android and iOS.\n   * @param {object} Optional parameters, currently only supports headers (such as Authorization (Basic Authentication), etc).\n   * @returns {Promise<any>} Returns a Promise that resolves to a FileEntry object.\n   */\n  @CordovaInstance({\n    successIndex: 2,\n    errorIndex: 3\n  })\n  download(source: string, target: string, trustAllHosts?: boolean, options?: { [s: string]: any; }): Promise<any> {\n    return;\n  }\n\n  /**\n   * Registers a listener that gets called whenever a new chunk of data is transferred.\n   * @param listener {function} Listener that takes a progress event.\n   */\n  @InstanceCheck({ sync: true })\n  onProgress(listener: (event: ProgressEvent) => any): void {\n    this._objectInstance.onprogress = listener;\n  }\n\n  /**\n   * Aborts an in-progress transfer. The onerror callback is passed a FileTransferError\n   * object which has an error code of FileTransferError.ABORT_ERR.\n   */\n  @CordovaInstance({\n    sync: true\n  })\n  abort(): void { }\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}